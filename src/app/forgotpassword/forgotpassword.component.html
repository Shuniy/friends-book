<div class="container">
  <div class="row">
    <div class="col-6 m-auto">
      <div *ngIf="!foundEmail">
        <div class="card">
          <h4 class="card-header text-center">Forgot Password</h4>
          <div class="card-body">
            <form
              [formGroup]="forgotPasswordForm"
              (ngSubmit)="checkEmailAndDOB()"
            >
              <div class="form-group my-3">
                <label class="form-label" for="email">Email</label>
                <input
                  type="text"
                  formControlName="email"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid': submitted && getFPForm.email.errors
                  }"
                />
                <div
                  *ngIf="submitted && getFPForm.email.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="getFPForm.email.errors.required">
                    Email is required
                  </div>
                </div>
              </div>
              <div class="form-group my-3">
                <label class="form-label" for="date">Date of Birth</label>
                <input
                  type="date"
                  id="date"
                  formControlName="dob"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid': submitted && getFPForm.dob.errors
                  }"
                />
                <div
                  *ngIf="submitted && getFPForm.dob.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="getFPForm.dob.errors.required">
                    Date of Birth is required
                  </div>
                </div>
              </div>
              <div class="form-group my-3">
                <button [disabled]="loading" class="btn btn-primary">
                  <span
                    *ngIf="loading"
                    class="spinner-border spinner-border-sm mr-1"
                  ></span>
                  Go
                </button>
                <a routerLink="/login" class="btn btn-secondary">Cancel</a>
              </div>
            </form>
          </div>
        </div>
      </div>

      <div *ngIf="foundEmail">
        <div class="card">
          <h5 class="card-header text-center">Reset Password</h5>
          <div class="card-body">
            <form [formGroup]="resetPasswordForm" (ngSubmit)="resetPassword()">
              <div class="form-group">
                <label>Password</label>
                <input
                  type="password"
                  formControlName="password"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid': submitted && getRPForm.password.errors
                  }"
                />
                <div
                  *ngIf="
                    (getRPForm.password.invalid &&
                      getRPForm.password.touched) ||
                    getRPForm.password.dirty
                  "
                >
                  <div
                    class="text-danger"
                    *ngIf="getRPForm.password.errors?.required"
                  >
                    Password is required
                  </div>
                </div>

                <label>Confirm Password</label>
                <input
                  type="password"
                  formControlName="confirmPassword"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid': submitted && getRPForm.confirmPassword.errors
                  }"
                />
                <div
                  *ngIf="
                    (getRPForm.confirmPassword.invalid &&
                      getRPForm.confirmPassword.touched) ||
                    getRPForm.confirmPassword.dirty
                  "
                >
                  <div
                    class="text-danger"
                    *ngIf="getRPForm.confirmPassword.errors?.required"
                  >
                    Confirm Password is required
                  </div>
                </div>
                <div
                  class="text-danger"
                  *ngIf="getRPForm.confirmPassword.errors?.ConfirmPassword"
                >
                  Passwords must match
                </div>
              </div>
              <div class="form-group">
                <button [disabled]="loading" class="btn btn-primary">
                  <span
                    *ngIf="loading"
                    class="spinner-border spinner-border-sm mr-1"
                  ></span>
                  Reset
                </button>
                <a routerLink="/login" class="btn btn-link btn-secondary"
                  >Cancel</a
                >
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
